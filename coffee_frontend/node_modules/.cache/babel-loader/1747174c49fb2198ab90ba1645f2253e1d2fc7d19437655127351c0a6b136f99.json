{"ast":null,"code":"/**\r\n * API сервис для взаимодействия с Django REST backend.\r\n * Базовый URL настроен для development (proxy в package.json).\r\n */\n\nconst API_BASE = '/api';\n\n/**\r\n * Загрузка меню с опциональной фильтрацией по категории.\r\n */\nexport const getMenu = async (categoryId = null) => {\n  const url = categoryId ? `${API_BASE}/menu/?category=${categoryId}` : `${API_BASE}/menu/`;\n  const res = await fetch(url);\n  if (!res.ok) throw new Error('Ошибка загрузки меню');\n  const data = await res.json();\n  // DRF возвращает { count, next, previous, results }; нужен массив\n  return Array.isArray(data) ? data : data.results || [];\n};\n\n/**\r\n * Загрузка категорий меню.\r\n */\nexport const getMenuCategories = async () => {\n  const res = await fetch(`${API_BASE}/menu_categories/`);\n  if (!res.ok) throw new Error('Ошибка загрузки категорий');\n  const data = await res.json();\n  return Array.isArray(data) ? data : data.results || [];\n};\n\n/**\r\n * Загрузка столиков.\r\n */\nexport const getTables = async () => {\n  const res = await fetch(`${API_BASE}/tables/`);\n  if (!res.ok) throw new Error('Ошибка загрузки столиков');\n  return res.json();\n};\n\n/**\r\n * Создание бронирования.\r\n * @param {Object} data - { name, phone, email, date, time, guests_count, location? }\r\n */\nexport const createReservation = async data => {\n  const res = await fetch(`${API_BASE}/reservations/`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n  const result = await res.json();\n  if (!res.ok) {\n    var _result$non_field_err;\n    const message = result.detail || ((_result$non_field_err = result.non_field_errors) === null || _result$non_field_err === void 0 ? void 0 : _result$non_field_err[0]) || JSON.stringify(result);\n    throw new Error(typeof message === 'string' ? message : 'Ошибка бронирования');\n  }\n  return result;\n};\n\n/**\r\n * Загрузка списка бронирований.\r\n */\nexport const getReservations = async () => {\n  const res = await fetch(`${API_BASE}/reservations/`);\n  if (!res.ok) throw new Error('Ошибка загрузки бронирований');\n  return res.json();\n};\n\n/**\r\n * Обновление статуса бронирования (для админки).\r\n */\nexport const updateReservationStatus = async (id, status) => {\n  const res = await fetch(`${API_BASE}/reservations/${id}/`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      status\n    })\n  });\n  if (!res.ok) {\n    const result = await res.json();\n    throw new Error(result.detail || 'Ошибка обновления');\n  }\n  return res.json();\n};\n\n/**\r\n * CRUD для меню (админка).\r\n */\nexport const getMenuItems = async (categoryId = null) => {\n  const url = categoryId ? `${API_BASE}/menu_items/?category=${categoryId}` : `${API_BASE}/menu_items/`;\n  const res = await fetch(url);\n  if (!res.ok) throw new Error('Ошибка загрузки меню');\n  return res.json();\n};\nexport const createMenuItem = async data => {\n  const res = await fetch(`${API_BASE}/menu_items/`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n  if (!res.ok) {\n    const err = await res.json();\n    throw new Error(JSON.stringify(err));\n  }\n  return res.json();\n};\nexport const updateMenuItem = async (id, data) => {\n  const res = await fetch(`${API_BASE}/menu_items/${id}/`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n  if (!res.ok) throw new Error('Ошибка обновления');\n  return res.json();\n};\nexport const deleteMenuItem = async id => {\n  const res = await fetch(`${API_BASE}/menu_items/${id}/`, {\n    method: 'DELETE'\n  });\n  if (!res.ok) throw new Error('Ошибка удаления');\n};\n\n/**\r\n * CRUD для столиков (админка).\r\n */\nexport const createTable = async data => {\n  const res = await fetch(`${API_BASE}/tables/`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n  if (!res.ok) throw new Error('Ошибка создания');\n  return res.json();\n};\nexport const updateTable = async (id, data) => {\n  const res = await fetch(`${API_BASE}/tables/${id}/`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n  if (!res.ok) throw new Error('Ошибка обновления');\n  return res.json();\n};\nexport const deleteTable = async id => {\n  const res = await fetch(`${API_BASE}/tables/${id}/`, {\n    method: 'DELETE'\n  });\n  if (!res.ok) throw new Error('Ошибка удаления');\n};","map":{"version":3,"names":["API_BASE","getMenu","categoryId","url","res","fetch","ok","Error","data","json","Array","isArray","results","getMenuCategories","getTables","createReservation","method","headers","body","JSON","stringify","result","_result$non_field_err","message","detail","non_field_errors","getReservations","updateReservationStatus","id","status","getMenuItems","createMenuItem","err","updateMenuItem","deleteMenuItem","createTable","updateTable","deleteTable"],"sources":["C:/Users/warni/Desktop/internet-tech/coffee_frontend/src/services/api.js"],"sourcesContent":["/**\r\n * API сервис для взаимодействия с Django REST backend.\r\n * Базовый URL настроен для development (proxy в package.json).\r\n */\r\n\r\nconst API_BASE = '/api';\r\n\r\n/**\r\n * Загрузка меню с опциональной фильтрацией по категории.\r\n */\r\nexport const getMenu = async (categoryId = null) => {\r\n  const url = categoryId\r\n    ? `${API_BASE}/menu/?category=${categoryId}`\r\n    : `${API_BASE}/menu/`;\r\n  const res = await fetch(url);\r\n  if (!res.ok) throw new Error('Ошибка загрузки меню');\r\n  const data = await res.json();\r\n  // DRF возвращает { count, next, previous, results }; нужен массив\r\n  return Array.isArray(data) ? data : (data.results || []);\r\n};\r\n\r\n/**\r\n * Загрузка категорий меню.\r\n */\r\nexport const getMenuCategories = async () => {\r\n  const res = await fetch(`${API_BASE}/menu_categories/`);\r\n  if (!res.ok) throw new Error('Ошибка загрузки категорий');\r\n  const data = await res.json();\r\n  return Array.isArray(data) ? data : (data.results || []);\r\n};\r\n\r\n/**\r\n * Загрузка столиков.\r\n */\r\nexport const getTables = async () => {\r\n  const res = await fetch(`${API_BASE}/tables/`);\r\n  if (!res.ok) throw new Error('Ошибка загрузки столиков');\r\n  return res.json();\r\n};\r\n\r\n/**\r\n * Создание бронирования.\r\n * @param {Object} data - { name, phone, email, date, time, guests_count, location? }\r\n */\r\nexport const createReservation = async (data) => {\r\n  const res = await fetch(`${API_BASE}/reservations/`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(data),\r\n  });\r\n\r\n  const result = await res.json();\r\n\r\n  if (!res.ok) {\r\n    const message = result.detail || result.non_field_errors?.[0] || JSON.stringify(result);\r\n    throw new Error(typeof message === 'string' ? message : 'Ошибка бронирования');\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n * Загрузка списка бронирований.\r\n */\r\nexport const getReservations = async () => {\r\n  const res = await fetch(`${API_BASE}/reservations/`);\r\n  if (!res.ok) throw new Error('Ошибка загрузки бронирований');\r\n  return res.json();\r\n};\r\n\r\n/**\r\n * Обновление статуса бронирования (для админки).\r\n */\r\nexport const updateReservationStatus = async (id, status) => {\r\n  const res = await fetch(`${API_BASE}/reservations/${id}/`, {\r\n    method: 'PATCH',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ status }),\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const result = await res.json();\r\n    throw new Error(result.detail || 'Ошибка обновления');\r\n  }\r\n  return res.json();\r\n};\r\n\r\n/**\r\n * CRUD для меню (админка).\r\n */\r\nexport const getMenuItems = async (categoryId = null) => {\r\n  const url = categoryId\r\n    ? `${API_BASE}/menu_items/?category=${categoryId}`\r\n    : `${API_BASE}/menu_items/`;\r\n  const res = await fetch(url);\r\n  if (!res.ok) throw new Error('Ошибка загрузки меню');\r\n  return res.json();\r\n};\r\n\r\nexport const createMenuItem = async (data) => {\r\n  const res = await fetch(`${API_BASE}/menu_items/`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) {\r\n    const err = await res.json();\r\n    throw new Error(JSON.stringify(err));\r\n  }\r\n  return res.json();\r\n};\r\n\r\nexport const updateMenuItem = async (id, data) => {\r\n  const res = await fetch(`${API_BASE}/menu_items/${id}/`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Ошибка обновления');\r\n  return res.json();\r\n};\r\n\r\nexport const deleteMenuItem = async (id) => {\r\n  const res = await fetch(`${API_BASE}/menu_items/${id}/`, { method: 'DELETE' });\r\n  if (!res.ok) throw new Error('Ошибка удаления');\r\n};\r\n\r\n/**\r\n * CRUD для столиков (админка).\r\n */\r\nexport const createTable = async (data) => {\r\n  const res = await fetch(`${API_BASE}/tables/`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Ошибка создания');\r\n  return res.json();\r\n};\r\n\r\nexport const updateTable = async (id, data) => {\r\n  const res = await fetch(`${API_BASE}/tables/${id}/`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Ошибка обновления');\r\n  return res.json();\r\n};\r\n\r\nexport const deleteTable = async (id) => {\r\n  const res = await fetch(`${API_BASE}/tables/${id}/`, { method: 'DELETE' });\r\n  if (!res.ok) throw new Error('Ошибка удаления');\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}